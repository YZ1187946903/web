{"remainingRequest":"/Users/curry/IdeaProjects/web/node_modules/babel-loader/lib/index.js!/Users/curry/IdeaProjects/web/src/store/modules/user.js","dependencies":[{"path":"/Users/curry/IdeaProjects/web/src/store/modules/user.js","mtime":1618911352000},{"path":"/Users/curry/IdeaProjects/web/node_modules/cache-loader/dist/cjs.js","mtime":1644834874663},{"path":"/Users/curry/IdeaProjects/web/node_modules/babel-loader/lib/index.js","mtime":1644834704109}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _Promise from \"/Users/curry/IdeaProjects/web/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport Vue from 'vue';\nimport { login } from '@/api/login';\nimport { USER_INFO } from '@/store/mutation-types';\nvar user = {\n  state: {\n    name: '',\n    avatar: '',\n    info: {}\n  },\n  mutations: {\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    },\n    SET_NAME: function SET_NAME(state, name) {\n      state.name = name;\n    },\n    SET_INFO: function SET_INFO(state, info) {\n      state.info = info;\n    }\n  },\n  actions: {\n    // 登录\n    Login: function Login(_ref, userInfo) {\n      var commit = _ref.commit;\n      return new _Promise(function (resolve, reject) {\n        login(userInfo).then(function (response) {\n          console.log(response);\n\n          if (response.code == 200) {\n            var _userInfo = {\n              id: response.data.admin.id,\n              userName: response.data.admin.name,\n              token: response.data.token // userInfo.id = response.data.data[0].user_id\n              // userInfo.name = response.data.data[0].user.user_nm\n              // userInfo.token = response.data.data[0].user.access_token\n\n            };\n            commit('SET_INFO', _userInfo);\n            commit('SET_NAME', _userInfo.userName);\n            Vue.ls.set(USER_INFO, _userInfo, 3 * 60 * 60 * 1000);\n            resolve();\n          } else {\n            reject(response.msg);\n          }\n        }).catch(function (error) {\n          console.log(error);\n          reject(\"未知异常\");\n        });\n      });\n    },\n    setUserInfo: function setUserInfo(_ref2) {\n      var commit = _ref2.commit;\n      var datas = Vue.ls.get(USER_INFO);\n      var info = datas;\n      commit('SET_INFO', info);\n      commit('SET_NAME', info.userName);\n      Vue.ls.set(USER_INFO, datas, 3 * 60 * 60 * 1000);\n    },\n    // 登出\n    Logout: function Logout(_ref3) {\n      var commit = _ref3.commit,\n          state = _ref3.state;\n      return new _Promise(function (resolve) {\n        commit('SET_NAME', '');\n        commit('SET_INFO', {});\n        Vue.ls.remove(USER_INFO);\n        resolve();\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"sources":["/Users/curry/IdeaProjects/web/src/store/modules/user.js"],"names":["Vue","login","USER_INFO","user","state","name","avatar","info","mutations","SET_AVATAR","SET_NAME","SET_INFO","actions","Login","userInfo","commit","resolve","reject","then","response","console","log","code","id","data","admin","userName","token","ls","set","msg","catch","error","setUserInfo","datas","get","Logout","remove"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport { login } from '@/api/login'\r\nimport { USER_INFO } from '@/store/mutation-types'\r\n\r\nconst user = {\r\n  state: {\r\n    name: '',\r\n    avatar: '',\r\n    info: {}\r\n  },\r\n\r\n  mutations: {\r\n    SET_AVATAR: (state, avatar) => {\r\n      state.avatar = avatar\r\n    },\r\n    SET_NAME: (state, name) => {\r\n      state.name = name\r\n    },\r\n    SET_INFO: (state, info) => {\r\n      state.info = info\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    // 登录\r\n    Login ({ commit }, userInfo) {\r\n      return new Promise((resolve, reject) => {\r\n        login(userInfo).then(response => {\r\n          console.log(response)\r\n          if (response.code == 200) {\r\n            const userInfo ={\r\n              id: response.data.admin.id,\r\n              userName: response.data.admin.name,\r\n              token: response.data.token\r\n            }\r\n            // userInfo.id = response.data.data[0].user_id\r\n            // userInfo.name = response.data.data[0].user.user_nm\r\n            // userInfo.token = response.data.data[0].user.access_token\r\n            commit('SET_INFO', userInfo)\r\n            commit('SET_NAME', userInfo.userName)\r\n            Vue.ls.set(USER_INFO, userInfo, 3 * 60 * 60 * 1000)\r\n            resolve()\r\n          } else {\r\n            reject(response.msg)\r\n          }\r\n        }).catch(error => {\r\n          console.log(error)\r\n          reject(\"未知异常\")\r\n        })\r\n      })\r\n    },\r\n    setUserInfo ({ commit }) {\r\n      var datas = Vue.ls.get(USER_INFO)\r\n      var info = datas\r\n      commit('SET_INFO', info)\r\n      commit('SET_NAME', info.userName)\r\n      Vue.ls.set(USER_INFO, datas, 3 * 60 * 60 * 1000)\r\n    },\r\n\r\n\r\n    // 登出\r\n    Logout ({ commit, state }) {\r\n      return new Promise((resolve) => {\r\n        commit('SET_NAME', '')\r\n        commit('SET_INFO', {})\r\n        Vue.ls.remove(USER_INFO)\r\n        resolve()\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default user\r\n"]}]}